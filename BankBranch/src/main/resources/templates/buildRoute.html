<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Подключение Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Подключение плагина для работы с маршрутами -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/leaflet-routing-machine/dist/leaflet-routing-machine.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
          crossorigin="anonymous">

</head>
<body>


<div class="container p-4">

    <h3>build a route</h3>

    <p th:text="${point1}"/>
    <p th:text="${point2}"/>
    <br>
    <a class="icon-link icon-link-hover" href="/">
        Icon link
        <svg class="bi" aria-hidden="true"><use xlink:href="#arrow-right"></use></svg>
    </a>
    <br>

    <div id="map" style="width: 1024px; height: 768px;"
         th:point1 = ${point1}
         th:data-lat="${pointLat}"
         th:data-lng="${pointLng}"></div>

    <script type="text/javascript">


    var mapElement = document.getElementById('map');
var lat = parseFloat(mapElement.getAttribute('data-lat'));
var lng = parseFloat(mapElement.getAttribute('data-lng'));

var map = L.map('map').setView([lat, lng], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
}).addTo(map);

var point = L.marker([lat, lng]).addTo(map);


<!--     var map = L.map('map').setView([55.781863, 49.124884], 13);-->

<!--    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {-->
<!--        attribution: '© OpenStreetMap contributors'-->
<!--    }).addTo(map);-->

<!--    var point1 = L.marker([55.781863, 49.124884]).addTo(map);-->
<!--    var point2 = L.marker([55.795343, 49.106515]).addTo(map);-->



    L.Routing.control({
        waypoints: [
            L.latLng(55.781863, 49.124884),
            L.latLng(55.795343, 49.106515)
        ],
        routeWhileDragging: true
    }).addTo(map);



    </script>

</div>


</body>
</html>